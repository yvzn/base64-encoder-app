<Window x:Class="Base64Utils.MainWindow"
xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
xmlns:local="clr-namespace:Base64Utils"
mc:Ignorable="d"
Title="Base64 Converter" Height="550" Width="800">
    <Window.Resources>
        <Storyboard x:Key="SpinnerAnimation" RepeatBehavior="Forever">
            <DoubleAnimation Storyboard.TargetName="SpinnerRotation"
                           Storyboard.TargetProperty="Angle"
                           From="0" To="360" Duration="0:0:1"/>
        </Storyboard>
    </Window.Resources>
    <Grid>
        <StackPanel HorizontalAlignment="Center" VerticalAlignment="Top" Width="700" Margin="20">
            <Grid Margin="10">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>
                
                <Button x:Name="SelectFileButton" 
                        Grid.Column="0"
                        Content="Select File" 
                        Height="40" 
                        Width="120"
                        Margin="0,0,10,0"
                        FontSize="16"
                        Click="SelectFileButton_Click"/>
                
                <TextBlock x:Name="FileNameTextBlock" 
                           Grid.Column="1"
                           Text="No file selected." 
                           VerticalAlignment="Center"
                           Margin="10,0"
                           FontSize="14"
                           TextWrapping="Wrap"
                           TextTrimming="CharacterEllipsis"/>
                
                <Viewbox x:Name="LoadingSpinner"
                         Grid.Column="2"
                         Width="30"
                         Height="30"
                         Margin="0,0,10,0"
                         Visibility="Collapsed">
                    <Canvas Width="100" Height="100">
                        <Canvas.RenderTransform>
                            <RotateTransform x:Name="SpinnerRotation" CenterX="50" CenterY="50" Angle="0"/>
                        </Canvas.RenderTransform>
                        <Ellipse Width="20" Height="20" Canvas.Left="40" Canvas.Top="5" Fill="#FF0078D4" Opacity="1.0"/>
                        <Ellipse Width="20" Height="20" Canvas.Left="65" Canvas.Top="15" Fill="#FF0078D4" Opacity="0.85"/>
                        <Ellipse Width="20" Height="20" Canvas.Left="75" Canvas.Top="40" Fill="#FF0078D4" Opacity="0.7"/>
                        <Ellipse Width="20" Height="20" Canvas.Left="65" Canvas.Top="65" Fill="#FF0078D4" Opacity="0.55"/>
                        <Ellipse Width="20" Height="20" Canvas.Left="40" Canvas.Top="75" Fill="#FF0078D4" Opacity="0.4"/>
                        <Ellipse Width="20" Height="20" Canvas.Left="15" Canvas.Top="65" Fill="#FF0078D4" Opacity="0.25"/>
                        <Ellipse Width="20" Height="20" Canvas.Left="5" Canvas.Top="40" Fill="#FF0078D4" Opacity="0.15"/>
                        <Ellipse Width="20" Height="20" Canvas.Left="15" Canvas.Top="15" Fill="#FF0078D4" Opacity="0.05"/>
                    </Canvas>
                </Viewbox>
                
                <Button x:Name="ConvertButton" 
                        Grid.Column="3"
                        Content="Convert to Base64" 
                        Height="40" 
                        Width="160"
                        Margin="0"
                        FontSize="16"
                        IsEnabled="False"
                        Click="ConvertButton_Click"/>
            </Grid>
            
            <Grid Margin="10,20,10,5">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>
                
                <TextBlock Grid.Column="0"
                           Text="Result:" 
                           FontSize="14"
                           FontWeight="Bold"
                           VerticalAlignment="Center"/>
                
                <Button x:Name="SaveToFileButton"
                        Grid.Column="2"
                        Content="Save to File"
                        Height="30"
                        Width="120"
                        Margin="0,0,10,0"
                        FontSize="12"
                        IsEnabled="False"
                        Click="SaveToFileButton_Click"/>
                
                <Button x:Name="CopyButton"
                        Grid.Column="3"
                        Content="Copy to Clipboard"
                        Height="30"
                        Width="140"
                        FontSize="12"
                        IsEnabled="False"
                        Click="CopyButton_Click"/>
            </Grid>
            
            <TextBox x:Name="ResultTextBox" 
                     Height="300" 
                     Margin="10"
                     TextWrapping="Wrap"
                     VerticalScrollBarVisibility="Auto"
                     IsReadOnly="True"
                     FontFamily="Consolas"
                     FontSize="12"/>
        </StackPanel>
        
        <StatusBar VerticalAlignment="Bottom" Height="25" Background="#FFF0F0F0">
            <StatusBarItem>
                <Grid>
                    <TextBlock x:Name="StatusBarText" 
                               Text="Ready" 
                               Foreground="#FF333333"
                               FontSize="14"
                               TextTrimming="CharacterEllipsis"
                               Cursor="Hand"
                               MouseLeftButtonDown="StatusBarText_MouseLeftButtonDown"
                               ToolTip="Click to expand message"/>
                    <Popup x:Name="StatusMessagePopup"
                           PlacementTarget="{Binding ElementName=StatusBarText}"
                           Placement="Top"
                           AllowsTransparency="True"
                           StaysOpen="True">
                        <Border Background="White" 
                                BorderBrush="#FFCCCCCC" 
                                BorderThickness="1"
                                Padding="10"
                                MaxWidth="750"
                                CornerRadius="3">
                            <Border.Effect>
                                <DropShadowEffect BlurRadius="10" ShadowDepth="2" Opacity="0.3"/>
                            </Border.Effect>
                            <Grid>
                                <TextBlock x:Name="ExpandedMessageText"
                                           TextWrapping="Wrap"
                                           Foreground="#FF333333"
                                           FontSize="14"
                                           Margin="0,0,30,0"/>
                                
                                <Button x:Name="ClosePopupButton"
                                        Content="✕"
                                        HorizontalAlignment="Right"
                                        VerticalAlignment="Top"
                                        Width="20"
                                        Height="20"
                                        Margin="0,-5,-5,-5"
                                        Background="Transparent"
                                        BorderThickness="0"
                                        FontSize="12"
                                        FontWeight="Bold"
                                        Cursor="Hand"
                                        Click="ClosePopupButton_Click">
                                    <Button.Style>
                                        <Style TargetType="Button">
                                            <Setter Property="Foreground" Value="#FF999999"/>
                                            <Style.Triggers>
                                                <Trigger Property="IsMouseOver" Value="True">
                                                    <Setter Property="Foreground" Value="#FFCC0000"/>
                                                    <Setter Property="Background" Value="#FFF0F0F0"/>
                                                </Trigger>
                                            </Style.Triggers>
                                        </Style>
                                    </Button.Style>
                                </Button>
                            </Grid>
                        </Border>
                    </Popup>
                </Grid>
            </StatusBarItem>
        </StatusBar>
    </Grid>
</Window>
