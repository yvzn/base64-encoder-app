<Window x:Class="Base64Utils.MainWindow"
xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
xmlns:local="clr-namespace:Base64Utils"
mc:Ignorable="d"
Title="Base64 Converter" Height="600" Width="800"
Closing="Window_Closing">
    <Window.Resources>
        <!-- Font Family -->
        <FontFamily x:Key="MainFont">fonts/#Atkinson Hyperlegible Next</FontFamily>
        
        <!-- https://colorhunt.co/palette/40a2e3fff6e9bbe2ec0d9276 -->
        <Color x:Key="EncodeAccentColor">#40A2E3</Color>
        <Color x:Key="DecodeAccentColor">#0D9276</Color>
        <SolidColorBrush x:Key="EncodeAccentBrush" Color="{StaticResource EncodeAccentColor}"/>
        <SolidColorBrush x:Key="DecodeAccentBrush" Color="{StaticResource DecodeAccentColor}"/>
        
        
        <!-- Enhanced focus visual style for better visibility -->
        <Style x:Key="EnhancedFocusButtonStyle" TargetType="Button">
            <Setter Property="FocusVisualStyle">
                <Setter.Value>
                    <Style>
                        <Setter Property="Control.Template">
                            <Setter.Value>
                                <ControlTemplate>
                                    <Rectangle Margin="-5" 
                                             StrokeThickness="2" 
                                             Stroke="#999999"
                                             StrokeDashArray="1 1"
                                             SnapsToDevicePixels="True"/>
                                </ControlTemplate>
                            </Setter.Value>
                        </Setter>
                    </Style>
                </Setter.Value>
            </Setter>
        </Style>
    </Window.Resources>
    <Grid TextElement.FontFamily="{StaticResource MainFont}">
        <Grid.RowDefinitions>
            <RowDefinition Height="*"/>
            <RowDefinition Height="32"/>
        </Grid.RowDefinitions>

        <TabControl x:Name="ModeTabControl"
                    Grid.Row="0"
                    Margin="10,10,10,10"
                    SelectionChanged="ModeTabControl_SelectionChanged">
            <TabItem x:Name="EncodeTab">
                <TabItem.Header>
                    <StackPanel>
                        <Rectangle Height="4" Fill="{StaticResource EncodeAccentBrush}" RadiusX="0" RadiusY="0"/>
                        <TextBlock Text="Encode" FontSize="14" Margin="0,6,0,0" FontWeight="SemiBold"/>
                    </StackPanel>
                </TabItem.Header>
                <ScrollViewer VerticalScrollBarVisibility="Auto">
                    <StackPanel HorizontalAlignment="Center" VerticalAlignment="Top" Width="700" Margin="10">
                        <Grid Margin="10">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="Auto"/>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="Auto"/>
                                <ColumnDefinition Width="Auto"/>
                            </Grid.ColumnDefinitions>
                            
                            <Button x:Name="SelectFileButton" 
                                    Grid.Column="0"
                                    Content="Select File" 
                                    Height="40" 
                                    Width="120"
                                    Margin="0,0,10,0"
                                    FontSize="16"
                                    Style="{StaticResource EnhancedFocusButtonStyle}"
                                    Click="SelectFileButton_Click"/>
                            
                            <TextBlock x:Name="FileNameTextBlock" 
                                       Grid.Column="1"
                                       Text="No file selected." 
                                       VerticalAlignment="Center"
                                       Margin="10,0"
                                       FontSize="14"
                                       TextWrapping="Wrap"
                                       TextTrimming="CharacterEllipsis"/>
                            
                            
                            <Button x:Name="ConvertButton" 
                                    Grid.Column="3"
                                    Content="Convert to Base64" 
                                    Height="40" 
                                    Width="160"
                                    Margin="0"
                                    FontSize="16"
                                    IsEnabled="False"
                                    Style="{StaticResource EnhancedFocusButtonStyle}"
                                    Click="ConvertButton_Click"/>
                        </Grid>
                        
                        <Grid Margin="10,20,10,5">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="Auto"/>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="Auto"/>
                                <ColumnDefinition Width="Auto"/>
                            </Grid.ColumnDefinitions>
                            
                            <TextBlock Grid.Column="0"
                                       Text="Result:" 
                                       FontSize="14"
                                       FontWeight="Bold"
                                       VerticalAlignment="Center"/>
                            
                            <Button x:Name="SaveToFileButton"
                                    Grid.Column="2"
                                    Content="Save to File"
                                    Height="30"
                                    Width="120"
                                    Margin="0,0,10,0"
                                    FontSize="12"
                                    IsEnabled="False"
                                    Style="{StaticResource EnhancedFocusButtonStyle}"
                                    Click="SaveToFileButton_Click"/>
                            
                            <Button x:Name="CopyButton"
                                    Grid.Column="3"
                                    Content="Copy to Clipboard"
                                    Height="30"
                                    Width="140"
                                    FontSize="12"
                                    IsEnabled="False"
                                    Style="{StaticResource EnhancedFocusButtonStyle}"
                                    Click="CopyButton_Click"/>
                        </Grid>
                        
                        <!-- Result Display Block -->
                        <Border x:Name="EncodeResultBlock"
                                Margin="10"
                                Padding="15"
                                BorderBrush="#FFCCCCCC"
                                BorderThickness="2"
                                CornerRadius="4"
                                Background="#FFF9F9F9"
                                Visibility="Collapsed">
                            <StackPanel>
                                <TextBlock x:Name="EncodeResultTitle"
                                           Text="✓ Encoding Successful"
                                           FontSize="16"
                                           FontWeight="SemiBold"
                                           Foreground="#FF0D9276"
                                           Margin="0,0,0,10"/>
                                <TextBlock x:Name="EncodeResultInfo"
                                           Text=""
                                           FontSize="14"
                                           TextWrapping="Wrap"
                                           Margin="0,0,0,10"/>
                                <TextBlock Text="Preview (first 100 characters):"
                                           FontSize="12"
                                           FontWeight="SemiBold"
                                           Margin="0,10,0,5"/>
                                <TextBox x:Name="EncodePreviewTextBox"
                                         Height="24"
                                         IsReadOnly="True"
                                         FontFamily="Consolas"
                                         FontSize="11"
                                         VerticalScrollBarVisibility="Hidden"
                                         HorizontalScrollBarVisibility="Hidden"
                                         TextWrapping="NoWrap"
                                         Background="White"
                                         BorderBrush="#FFCCCCCC"
                                         Padding="5,4"/>
                                <TextBlock Text="Use the buttons above to copy the complete Base64 string or save it to a file."
                                           FontSize="12"
                                           FontStyle="Italic"
                                           Foreground="#FF666666"
                                           Margin="0,10,0,0"
                                           TextWrapping="Wrap"/>
                            </StackPanel>
                        </Border>
                    </StackPanel>
                </ScrollViewer>
            </TabItem>

            <TabItem x:Name="DecodeTab">
                <TabItem.Header>
                    <StackPanel>
                        <Rectangle Height="4" Fill="{StaticResource DecodeAccentBrush}" RadiusX="0" RadiusY="0"/>
                        <TextBlock Text="Decode" FontSize="14" Margin="0,6,0,0" FontWeight="SemiBold"/>
                    </StackPanel>
                </TabItem.Header>
                <ScrollViewer VerticalScrollBarVisibility="Auto">
                    <StackPanel HorizontalAlignment="Center" VerticalAlignment="Top" Width="700" Margin="10">
                        <Grid Margin="10">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="Auto"/>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="Auto"/>
                                <ColumnDefinition Width="Auto"/>
                            </Grid.ColumnDefinitions>
                            
                            <Button x:Name="SelectBase64FileButton" 
                                    Grid.Column="0"
                                    Content="Select File" 
                                    Height="40" 
                                    Width="120"
                                    Margin="0,0,10,0"
                                    FontSize="16"
                                    Style="{StaticResource EnhancedFocusButtonStyle}"
                                    Click="SelectBase64FileButton_Click"/>
                            
                            <TextBlock x:Name="Base64FileNameTextBlock" 
                                       Grid.Column="1"
                                       Text="No file selected." 
                                       VerticalAlignment="Center"
                                       Margin="10,0"
                                       FontSize="14"
                                       TextWrapping="Wrap"
                                       TextTrimming="CharacterEllipsis"/>
                            
                            
                            <Button x:Name="DecodeButton" 
                                    Grid.Column="3"
                                    Content="Decode" 
                                    Height="40" 
                                    Width="160"
                                    Margin="0"
                                    FontSize="16"
                                    IsEnabled="False"
                                    Style="{StaticResource EnhancedFocusButtonStyle}"
                                    Click="DecodeButton_Click"/>
                        </Grid>
                        
                        <Grid Margin="10,20,10,5">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="Auto"/>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="Auto"/>
                            </Grid.ColumnDefinitions>
                            
                            <TextBlock Grid.Column="0"
                                       Text="Result:" 
                                       FontSize="14"
                                       FontWeight="Bold"
                                       VerticalAlignment="Center"/>
                            
                            <Button x:Name="SaveDecodedToFileButton"
                                    Grid.Column="2"
                                    Content="Save to File"
                                    Height="30"
                                    Width="120"
                                    Margin="0,0,0,0"
                                    FontSize="12"
                                    IsEnabled="False"
                                    Style="{StaticResource EnhancedFocusButtonStyle}"
                                    Click="SaveDecodedToFileButton_Click"/>
                        </Grid>
                        
                        <!-- Result Display Block -->
                        <Border x:Name="DecodeResultBlock"
                                Margin="10"
                                Padding="15"
                                BorderBrush="#FFCCCCCC"
                                BorderThickness="2"
                                CornerRadius="4"
                                Background="#FFF9F9F9"
                                Visibility="Collapsed">
                            <StackPanel>
                                <TextBlock x:Name="DecodeResultTitle"
                                           Text="✓ Decoding Successful"
                                           FontSize="16"
                                           FontWeight="SemiBold"
                                           Foreground="#FF0D9276"
                                           Margin="0,0,0,10"/>
                                <TextBlock x:Name="DecodeResultInfo"
                                           Text=""
                                           FontSize="14"
                                           TextWrapping="Wrap"
                                           Margin="0,0,0,10"/>
                                <TextBlock Text="Use the button above to save the decoded binary content to a file."
                                           FontSize="12"
                                           FontStyle="Italic"
                                           Foreground="#FF666666"
                                           Margin="0,10,0,0"
                                           TextWrapping="Wrap"/>
                            </StackPanel>
                        </Border>
                    </StackPanel>
                </ScrollViewer>
            </TabItem>
        </TabControl>
        
        <StatusBar Grid.Row="1" Height="32" Background="#FFF5F5F5" FontFamily="{StaticResource MainFont}">
            <StatusBarItem>
                <Grid VerticalAlignment="Center">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="10"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>
                    <Border x:Name="StatusBarAccent" Grid.Column="0" Width="4" CornerRadius="0" Background="{StaticResource EncodeAccentBrush}"/>
                    <Grid Grid.Column="1">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="Auto"/>
                        </Grid.ColumnDefinitions>
                        <TextBlock x:Name="StatusBarText" Grid.Column="0"
                                   Text="Ready" 
                                   Foreground="#FF333333"
                                   FontSize="14"
                                   TextTrimming="CharacterEllipsis"
                                   Cursor="Hand"
                                   Focusable="True"
                                   MouseLeftButtonDown="StatusBarText_MouseLeftButtonDown"
                                   KeyDown="StatusBarText_KeyDown"
                                   ToolTip="Press Enter or Space to expand message"/>
                        <ProgressBar x:Name="StatusProgress" Grid.Column="1"
                                     Width="140"
                                     Height="14"
                                     Margin="8,0,0,0"
                                     IsIndeterminate="True"
                                     Visibility="Collapsed"
                                     Foreground="{StaticResource EncodeAccentBrush}"/>
                        <Popup x:Name="StatusMessagePopup"
                               PlacementTarget="{Binding ElementName=StatusBarText}"
                               Placement="Top"
                               AllowsTransparency="True"
                               StaysOpen="True"
                               Opened="StatusMessagePopup_Opened">
                            <Border Background="White" 
                                BorderBrush="#FFCCCCCC" 
                                BorderThickness="1"
                                Padding="10"
                                MaxWidth="750"
                                CornerRadius="3"
                                TextElement.FontFamily="{StaticResource MainFont}">
                                <Border.Effect>
                                    <DropShadowEffect BlurRadius="10" ShadowDepth="2" Opacity="0.3"/>
                                </Border.Effect>
                                <Grid>
                                    <TextBlock x:Name="ExpandedMessageText"
                                               TextWrapping="Wrap"
                                               Foreground="#FF333333"
                                               FontSize="14"
                                               Margin="0,0,30,0"/>
                                    
                                    <Button x:Name="ClosePopupButton"
                                            Content="✕"
                                            HorizontalAlignment="Right"
                                            VerticalAlignment="Top"
                                            Width="20"
                                            Height="20"
                                            Margin="0,-5,-5,-5"
                                            Background="Transparent"
                                            BorderThickness="0"
                                            FontSize="12"
                                            FontWeight="Bold"
                                            Cursor="Hand"
                                            ToolTip="Press Escape or click to close"
                                            Click="ClosePopupButton_Click"
                                            KeyDown="ClosePopupButton_KeyDown">
                                        <Button.Style>
                                            <Style TargetType="Button">
                                                <Setter Property="Foreground" Value="#FF999999"/>
                                                <Style.Triggers>
                                                    <Trigger Property="IsMouseOver" Value="True">
                                                        <Setter Property="Foreground" Value="#FFCC0000"/>
                                                        <Setter Property="Background" Value="#FFF0F0F0"/>
                                                    </Trigger>
                                                </Style.Triggers>
                                            </Style>
                                        </Button.Style>
                                    </Button>
                                </Grid>
                            </Border>
                        </Popup>
                    </Grid>
                </Grid>
            </StatusBarItem>
        </StatusBar>
    </Grid>
</Window>
